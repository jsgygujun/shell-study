# 常用命令和操作

## 一、Shell 解释器

Linux 提供的 Shell 解释器有：

```shell
[hadoop@hadoop-101 ~]$ cat /etc/shells
/bin/sh
/bin/bash
/sbin/nologin
/bin/dash
```

不同的 shell 解析器，功能不同，比如 csh，符合 c 语言风格的 shell 解析器。Centos 默认使用的是/bin/sh 和 /bin/bash 作为 shell 解析器。

`bash` 和 `sh` 的关系：

```shell
[hadoop@hadoop-101 ~]$ ls -al /bin | grep bash
-rwxr-xr-x.  1 root root 906248 5月  11 2016 bash
lrwxrwxrwx.  1 root root      4 7月  18 22:12 sh -> bash
```

Centos 默认的解析器：

```shell
[hadoop@hadoop-101 ~]$ echo $SHELL
/bin/bash
```

## 二、入门

### 2.1 脚本格式

脚本以 `#!/bin/bash`开头（指定解析器）

### 2.2 第一个 shell 脚本

输出 hello world 的 shell 脚本

``````shell
#!/bin/bash
echo "hello world"
``````

### 三、Shell 中的变量

### 3.1 系统变量

常用的系统变量有： `$HOME`、`$PWD`、`$USR`等

显示当前 Shell 中的变量: set

### 3.2 自定义变量

* 基本语法
  1. 定义变量:变量=值
  2. 撤销变量:unset 变量
  3. 声明静态变量:readonly 变量，注意：不能 unset
* 变量定义规则
  1. 变量名称可以由字母、数字和下划线组成，但是不能以数字开头，**环境变量名建议大写**。
  2. 等号两侧不能有空格
  3. 在 bash 中，变量默认类型都是字符串类型，无法直接进行数值运算。
  4. 变量的值如果有空格，需要使用双引号或单引号括起来。
  5. 使用双引号，可以识别变量，使用单引号则不能识别变量。
  6. 使用反引号，可以将语句运行的结果作为值赋值给变量!
* 案例实操

### 3.3 特殊变量： $n

* 基本语法

  $n ： n为数字，$0代表该脚本名称，$1-$9代表第一到第九个参数，十以上的参数需要用大括号包含如${10}

* 案例实操

### 3.4 特殊变量： $#

* 基本语法

  $#： 获取所有输入参数个数，常用于循环

* 案例实操

### 3.5 特殊变量： $*、$@

* 基本语法

  `$*`： 这个变量代表命令行中所有的参数，`$*`把所有的参数看成一个整体。

  `$@`： 这个变量也代表命令行中所有参数，不过`$@`把每个参数区分对待。

* 案例实操

### 3.6 特殊变量： $?

* 基本语法

  `$?`： 最后一次执行的命令的返回状态。如果这个变量的值为 0，证明上一个命令正确执行；如果这个变量的值为非 0(具体是哪个数，由命令自己来决定)，则证明上一个命令执行不正确了。

* 案例实操

## sed

删除文件的前N行内容
```shell
sed -i '1,Nd' file.txt
```

